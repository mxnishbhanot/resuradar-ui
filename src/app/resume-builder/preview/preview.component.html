<div class="preview-container">
  <!-- Header -->
  <div class="preview-header">
    <div class="header-left">
      <button mat-icon-button class="close-btn" (click)="close()" matTooltip="Close">
        <mat-icon>close</mat-icon>
      </button>

      <div class="template-selector">
        <label>Template:</label>
        <select [(ngModel)]="currentTemplate" (ngModelChange)="changeTemplate()" class="template-dropdown">
          <option value="classic">Classic</option>
          <option value="modern">Modern</option>
          <option value="default">Default</option>
        </select>
      </div>
    </div>

    <!-- Zoom Controls -->
    <div class="zoom-controls" *ngIf="!isLoading">
      <button mat-icon-button (click)="zoomOut()" matTooltip="Zoom Out">
        <mat-icon>zoom_out</mat-icon>
      </button>
      <span class="zoom-value">{{ (zoom * 100) | number:'1.0-0' }}%</span>
      <button mat-icon-button (click)="zoomIn()" matTooltip="Zoom In">
        <mat-icon>zoom_in</mat-icon>
      </button>
      <button mat-icon-button (click)="resetZoom()" matTooltip="Reset Zoom">
        <mat-icon>refresh</mat-icon>
      </button>
    </div>

    <button mat-flat-button color="primary" (click)="downloadPDF()" class="download-btn" [disabled]="isLoading">
      <mat-icon>download</mat-icon>
      <span>{{ isLoading ? 'Generating...' : 'Download PDF' }}</span>
    </button>
  </div>

  <!-- Body -->
  <div class="preview-body">
    <!-- Skeleton Loader -->
    <div class="skeleton" *ngIf="isLoading">
      <div class="skeleton-page"></div>
    </div>

    <!-- PDF Viewer -->
    <div class="preview-frame-wrapper" *ngIf="pdfUrl && !isLoading">
      <pdf-viewer
        [src]="pdfUrl"
        [zoom]="zoom"
        [original-size]="false"
        [render-text]="true"
        (after-load-complete)="onPDFLoaded()"
        style="width: 100%; height: 100%; display: block;"
      ></pdf-viewer>
    </div>
  </div>
</div>
