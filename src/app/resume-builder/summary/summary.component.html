<div class="summary-container">

  <!-- Section Header -->
  <div class="section-header">
    <div class="header-icon-wrapper">
      <mat-icon class="header-icon">star</mat-icon>
    </div>
    <div class="header-content">
      <h2 class="section-title">Professional Summary</h2>
      <p class="section-subtitle">Create a compelling overview that captures your professional essence and career
        highlights.</p>
    </div>
  </div>

  <!-- Summary Display Card -->
  <div class="summary-display" *ngIf="summary && !isEditing">
    <div class="summary-card">
      <div class="card-header">
        <div class="card-badge">
          <mat-icon>description</mat-icon>
        </div>
        <div class="card-title-section">
          <h3 class="card-title">Your Professional Summary</h3>
          <p class="card-subtitle">
            <mat-icon class="inline-icon">check_circle</mat-icon>
            Summary Added
          </p>
        </div>
        <div class="card-actions">
          <button mat-icon-button (click)="editSummary()" class="action-btn edit-btn" matTooltip="Edit">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button (click)="deleteSummary()" class="action-btn delete-btn" matTooltip="Delete">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>
      <div class="summary-text-wrapper">
        <p class="summary-text">{{ summary }}</p>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!summary && !isEditing">
    <div class="empty-state-icon">
      <mat-icon>description</mat-icon>
    </div>
    <h3 class="empty-state-title">No Professional Summary Yet</h3>
    <p class="empty-state-description">A compelling professional summary is your chance to make a strong first
      impression. Highlight your expertise, achievements, and career goals.</p>
    <div class="empty-state-actions">
      <button mat-flat-button color="primary" class="primary-action-btn" (click)="startManualEdit()">
        <mat-icon>edit</mat-icon>
        Write Your Summary
      </button>
      <!-- Uncomment when AI is ready -->
      <!-- <button mat-stroked-button class="secondary-action-btn" (click)="generateWithAI()" [disabled]="isGenerating">
        <mat-icon *ngIf="!isGenerating">auto_awesome</mat-icon>
        <mat-spinner *ngIf="isGenerating" diameter="18"></mat-spinner>
        {{ isGenerating ? 'Generating...' : 'Generate with AI' }}
      </button> -->
    </div>
  </div>

  <!-- Summary Form Editor -->
  <div class="form-container" *ngIf="isEditing">
    <div class="form-header">
      <div class="form-header-icon">
        <mat-icon>edit_note</mat-icon>
      </div>
      <div class="form-header-text">
        <h3 class="form-title">{{ summary ? 'Edit' : 'Write' }} Professional Summary</h3>
        <p class="form-subtitle">Craft a compelling narrative that showcases your professional value</p>
      </div>
    </div>

    <form [formGroup]="form" class="summary-form">

      <!-- Summary Textarea -->
      <div class="form-section">
        <mat-form-field appearance="outline" class="form-field full-width">
          <mat-label>Your Professional Summary</mat-label>
          <textarea matInput formControlName="summary" rows="10"
            placeholder="Example: Results-driven Software Engineer with 5+ years of experience in full-stack development. Proven track record of leading cross-functional teams to deliver scalable solutions that increased user engagement by 40%. Seeking to leverage expertise in cloud architecture and agile methodologies to drive innovation at a forward-thinking tech company."
            cdkTextareaAutosize cdkAutosizeMinRows="8" cdkAutosizeMaxRows="15"></textarea>
          <mat-hint align="start">Write 3-5 impactful sentences</mat-hint>
          <mat-hint align="end">{{ form.get('summary')?.value?.length || 0 }} / 500 characters</mat-hint>
        </mat-form-field>
      </div>

      <!-- Writing Tips -->
      <div class="tips-section">
        <div class="tips-header">
          <mat-icon class="tips-icon">lightbulb</mat-icon>
          <h4 class="tips-title">Professional Summary Writing Tips</h4>
        </div>
        <div class="tips-grid">
          <div class="tip-card">
            <div class="tip-number">1</div>
            <div class="tip-content">
              <h5 class="tip-title">Start Strong</h5>
              <p class="tip-description">Begin with your current role or strongest qualification</p>
            </div>
          </div>
          <div class="tip-card">
            <div class="tip-number">2</div>
            <div class="tip-content">
              <h5 class="tip-title">Quantify Achievements</h5>
              <p class="tip-description">Include 2-3 key achievements with measurable results</p>
            </div>
          </div>
          <div class="tip-card">
            <div class="tip-number">3</div>
            <div class="tip-content">
              <h5 class="tip-title">Show Direction</h5>
              <p class="tip-description">Mention your career goals or what you're seeking</p>
            </div>
          </div>
          <div class="tip-card">
            <div class="tip-number">4</div>
            <div class="tip-content">
              <h5 class="tip-title">Be Concise</h5>
              <p class="tip-description">Keep it focused and impactful (3-5 sentences)</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button mat-stroked-button type="button" (click)="cancelEdit()" class="cancel-btn">
          <mat-icon>close</mat-icon>
          Cancel
        </button>
        <!-- Uncomment when AI is ready -->
        <!-- <button mat-stroked-button type="button" class="ai-btn" (click)="generateWithAI()" [disabled]="isGenerating">
          <mat-spinner *ngIf="isGenerating" diameter="18"></mat-spinner>
          <mat-icon *ngIf="!isGenerating">auto_awesome</mat-icon>
          {{ isGenerating ? 'Generating...' : 'Generate with AI' }}
        </button> -->
        <button mat-flat-button color="primary" (click)="saveSummary()" [disabled]="!form.get('summary')?.value?.trim()"
          class="save-btn">
          <mat-icon>check</mat-icon>
          Save Summary
        </button>
      </div>
    </form>
  </div>

  <!-- Review Dashboard -->
  <div class="review-dashboard" *ngIf="!isEditing">
    <div class="dashboard-header">
      <div class="dashboard-icon-wrapper">
        <mat-icon class="dashboard-icon">dashboard</mat-icon>
      </div>
      <div class="dashboard-header-text">
        <h3 class="dashboard-title">Resume Completion Dashboard</h3>
        <p class="dashboard-subtitle">Track your progress and ensure all key sections are complete</p>
      </div>
    </div>

    <!-- Stats Section -->
    <div class="stats-section">
      <!-- Overall Completion Card (Separate Full-Width) -->
      <div class="overall-stat">
        <div class="stat-card stat-card-primary">
          <div class="stat-icon-wrapper stat-icon-total">
            <mat-icon>donut_large</mat-icon>
          </div>
          <div class="stat-content">
            <span class="stat-label">Overall Completion</span>
            <span class="stat-value">{{ completedSections }} / 6</span>
            <div class="stat-progress">
              <div class="stat-progress-bar" [style.width.%]="completionPercentage"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Inline Stats Grid for the 4 Sections -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon-wrapper stat-icon-experience">
            <mat-icon>work</mat-icon>
          </div>
          <div class="stat-content">
            <span class="stat-label">Experience</span>
            <span class="stat-value">{{ experienceCount }}</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon-wrapper stat-icon-education">
            <mat-icon>school</mat-icon>
          </div>
          <div class="stat-content">
            <span class="stat-label">Education</span>
            <span class="stat-value">{{ educationCount }}</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon-wrapper stat-icon-projects">
            <mat-icon>folder</mat-icon>
          </div>
          <div class="stat-content">
            <span class="stat-label">Projects</span>
            <span class="stat-value">{{ projectsCount }}</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon-wrapper stat-icon-skills">
            <mat-icon>stars</mat-icon>
          </div>
          <div class="stat-content">
            <span class="stat-label">Skills</span>
            <span class="stat-value">{{ skillsCount }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Completion Checklist -->
    <div class="checklist-section">
      <div class="checklist-header">
        <mat-icon class="checklist-icon">fact_check</mat-icon>
        <h4 class="checklist-title">Completion Checklist</h4>
      </div>

      <div class="checklist-items">
        <div class="checklist-item" [class.completed]="hasPersonalInfo">
          <div class="checklist-icon-wrapper">
            <mat-icon>{{ hasPersonalInfo ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
          </div>
          <div class="checklist-content">
            <span class="checklist-label">Personal Information</span>
            <span class="checklist-description">Name and contact details added</span>
          </div>
        </div>

        <div class="checklist-item" [class.completed]="hasSummary">
          <div class="checklist-icon-wrapper">
            <mat-icon>{{ hasSummary ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
          </div>
          <div class="checklist-content">
            <span class="checklist-label">Professional Summary</span>
            <span class="checklist-description">Compelling overview created</span>
          </div>
        </div>

        <div class="checklist-item" [class.completed]="hasExperience">
          <div class="checklist-icon-wrapper">
            <mat-icon>{{ hasExperience ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
          </div>
          <div class="checklist-content">
            <span class="checklist-label">Work Experience</span>
            <span class="checklist-description">At least one position added</span>
          </div>
        </div>

        <div class="checklist-item" [class.completed]="hasEducation">
          <div class="checklist-icon-wrapper">
            <mat-icon>{{ hasEducation ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
          </div>
          <div class="checklist-content">
            <span class="checklist-label">Education</span>
            <span class="checklist-description">Academic background included</span>
          </div>
        </div>

        <div class="checklist-item" [class.completed]="hasProjects">
          <div class="checklist-icon-wrapper">
            <mat-icon>{{ hasProjects ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
          </div>
          <div class="checklist-content">
            <span class="checklist-label">Projects</span>
            <span class="checklist-description">At least one project added</span>
          </div>
        </div>

        <div class="checklist-item" [class.completed]="hasSkills">
          <div class="checklist-icon-wrapper">
            <mat-icon>{{ hasSkills ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
          </div>
          <div class="checklist-content">
            <span class="checklist-label">Skills</span>
            <span class="checklist-description">At least 3 skills listed</span>
          </div>
        </div>
      </div>

      <!-- Completion Message -->
      <div class="completion-message" *ngIf="completedSections === 6">
        <div class="completion-icon">
          <mat-icon>celebration</mat-icon>
        </div>
        <div class="completion-text">
          <h5 class="completion-title">ðŸŽ‰ Resume Complete!</h5>
          <p class="completion-description">Great job! Your resume is ready. Click "Finish & Preview" to review and
            download.</p>
        </div>
      </div>
    </div>
  </div>

</div>
